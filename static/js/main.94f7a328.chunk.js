(this["webpackJsonpnasa-test-app"]=this["webpackJsonpnasa-test-app"]||[]).push([[0],{16:function(e,t,a){e.exports=a.p+"static/media/preloader.23f2f1ea.gif"},39:function(e,t,a){e.exports=a(72)},44:function(e,t,a){},45:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),u=a.n(c),i=(a(44),a(45),a(2)),o=a(3),s=a.n(o),l=a(9),p=a(11),f=a(36),m=a(15),d=a.n(m);function E(e){return"https://api.nasa.gov/planetary/apod?api_key=TdCcOumK7lyile0FzWeLOAa7YKBRZJL4zvnCVrUE&date=".concat(e)}function h(){for(var e=[],t=Date.now(),a=0;a<14;a++){var n=new Date(t-864e5*a).toISOString().slice(0,10);e.push(n)}return e}var v,b=a(10);!function(e){e.SET_PICTURE="SET_PICTURE",e.SET_PICTURE_ON_PAGE="SET_PICTURE_ON_PAGE"}(v||(v={}));var O=function(e){return function(){var t=Object(l.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get(e);case 2:n=t.sent,t.prev=3,a((r=n.data,{type:v.SET_PICTURE,body:r})),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(3),new Error("The request is failed.");case 10:case"end":return t.stop()}var r}),t,null,[[3,7]])})));return function(e){return t.apply(this,arguments)}}()},g=a(16),w=a.n(g),y=(a(68),a(12));function j(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.picture})),a=localStorage.getItem("date"),c=Object(n.useState)(a||(new Date).toISOString().slice(0,10)),u=Object(p.a)(c,2),i=u[0],o=u[1],f=Object(n.useRef)(null),m=Object(n.useState)(""),d=Object(p.a)(m,2),h=d[0],v=d[1],g=Object(n.useState)(!1),j=Object(p.a)(g,2),k=j[0],x=j[1];function S(){return(S=Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(O(E(i)));case 2:x(!0);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(e,t){e?localStorage.removeItem("date"):localStorage.setItem("date",t)}function P(){return(P=Object(l.a)(s.a.mark((function t(a){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new Date(a)<=new Date,r=new Date(a).toISOString().slice(0,10)===(new Date).toISOString().slice(0,10),!n){t.next=11;break}return v(""),_(r,a),x(!1),t.next=8,e(O(E(a)));case 8:x(!0),t.next=13;break;case 11:return v("You did choose the incorrenct date."),t.abrupt("return");case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){S.apply(this,arguments)}()}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Choose a date:"),r.a.createElement("input",{type:"date",defaultValue:i,ref:f,onChange:function(e){var t=e.target.value;o(t),function(e){P.apply(this,arguments)}(t)}}),r.a.createElement("p",{className:"App__Error"},h),k?r.a.createElement("img",{src:t.url,className:"App__Picture-Display",alt:"NASA picture of a day"}):r.a.createElement("img",{src:w.a,className:"Preloader"}),r.a.createElement(y.b,{to:"/picture/".concat(t.date)},"Show more info"))}function k(e){var t=e.key,a=e.url;return r.a.createElement("div",{key:t,className:"Size-Wrapper"},r.a.createElement("a",{href:a,target:"_blank",className:"Link-To-Video"},"Video"))}function x(e){var t=e.key,a=e.date,n=e.url;return r.a.createElement("div",{key:t,className:"Size-Wrapper"},r.a.createElement(y.b,{className:"Link-To-Picture-Info",to:"/picture/".concat(a)},r.a.createElement("img",{className:"App__Picture-Item",src:n,alt:""})))}a(70);function S(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1];function u(){return(u=Object(l.a)(s.a.mark((function e(){var t,a,n,r,u,i,o,l,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=!0,n=!1,e.prev=3,u=Object(f.a)(h());case 5:return e.next=7,u.next();case 7:return i=e.sent,a=i.done,e.next=11,i.value;case 11:if(o=e.sent,a){e.next=21;break}return l=o,e.next=16,d.a.get(E(l));case 16:p=e.sent,t.push(p.data);case 18:a=!0,e.next=5;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(3),n=!0,r=e.t0;case 27:if(e.prev=27,e.prev=28,a||null==u.return){e.next=32;break}return e.next=32,u.return();case 32:if(e.prev=32,!n){e.next=35;break}throw r;case 35:return e.finish(32);case 36:return e.finish(27);case 37:e.prev=38,c(t),e.next=45;break;case 42:throw e.prev=42,e.t1=e.catch(38),new Error("The request is failed.");case 45:case"end":return e.stop()}}),e,null,[[3,23,27,37],[28,,32,36],[38,42]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){u.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"NASA picture of a day"),r.a.createElement(j,null),r.a.createElement("h2",null,"Pictures for last 2 weeks"),r.a.createElement("div",{className:"Pictures-List"},a.length?a.map((function(e){return"video"===e.media_type?r.a.createElement(k,{key:e.date,url:e.url}):"image"===e.media_type?r.a.createElement(x,{key:e.date,date:e.date,url:e.url}):void 0})):r.a.createElement("img",{src:w.a,className:"Preloader"})))}var _=function(e){return function(){var t=Object(l.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get(e);case 2:n=t.sent,t.prev=3,a((r=n.data,{type:v.SET_PICTURE_ON_PAGE,body:r})),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(3),new Error("The request is failed.");case 10:case"end":return t.stop()}var r}),t,null,[[3,7]])})));return function(e){return t.apply(this,arguments)}}()};a(71);function P(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.pictureOnPage})),c=e.match.params.date,u=Object(n.useState)(!1),i=Object(p.a)(u,2),o=i[0],f=i[1];function m(){return(m=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(_(E(c)));case 2:f(!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){m.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"Picture-Page"},o?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,a.title),r.a.createElement("img",{src:a.url,className:"Picture-Page__Picture",alt:"NASA picture of a day"}),r.a.createElement("p",null,a.explanation)):r.a.createElement("img",{src:w.a,className:"Preloader"}))}function N(){return r.a.createElement("main",{className:"App-Container"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:S}),r.a.createElement(i.a,{path:"/picture/:date",exact:!0,component:P})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=a(13),I=a(25);var A=Object(T.c)({picture:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.SET_PICTURE:return Object(I.a)({},t.body);default:return e}},pictureOnPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.SET_PICTURE_ON_PAGE:return Object(I.a)({},t.body);default:return e}}}),C=a(38),R=Object(C.createLogger)(),U=a(35),D=Object(T.d)(A,Object(T.a)(U.a,R));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b.a,{store:D},r.a.createElement(y.a,null,r.a.createElement(N,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.94f7a328.chunk.js.map